# Backlog — задачи к рассмотрению

> Здесь собираются идеи, фичи и задачи, которые еще не проработаны или не приоритизированы.

## Инфраструктура
<!-- Задачи по настройке окружения, CI/CD, мониторингу -->

## [D-1] Создать базовую структуру telegram-bot-service
**Роль:** Developer
**Приоритет:** Высокий
**Статус:** [x] Выполнено
**Оценка:** S

**Описание:** 
Создать структуру директорий и базовые файлы для telegram-bot-service согласно спецификации docs/specs/telegram-bot-service.md

**Критерии готовности:**
- [x] Создана структура директорий services/telegram-bot-service
- [x] Создан main.go с базовой структурой
- [x] Создан go.mod с зависимостями из спецификации
- [x] Создан internal/config/config.go для загрузки env переменных
- [x] Написаны unit тесты для config с покрытием 80%
- [x] Сервис успешно компилируется и запускается

**Зависимости:** нет

---

## [D-2] Реализовать webhook и longpoll режимы работы бота
**Роль:** Developer  
**Приоритет:** Высокий
**Статус:** [x] Выполнено
**Оценка:** M

**Описание:**
Реализовать два режима работы бота согласно переменной TELEGRAM_BOT_MODE

**Критерии готовности:**
- [x] Реализован webhook mode с HTTP сервером на SERVICE_PORT
- [x] Реализован longpoll mode с getUpdates и POLL_TIMEOUT
- [x] Автоматическая установка/удаление webhook при старте
- [x] Graceful shutdown для обоих режимов
- [x] Unit тесты для обоих режимов с покрытием 80%+
- [x] Ручное тестирование переключения режимов

**Зависимости:** D-1

---

## [D-3] Реализовать команды бота и echo handler
**Роль:** Developer
**Приоритет:** Высокий  
**Статус:** [x] Выполнено
**Оценка:** M

**Описание:**
Реализовать обработку команды /start, deep link и echo режим

**Критерии готовности:**
- [x] Команда /start отправляет приветствие с inline кнопкой WebApp
- [x] Deep link /start game передает параметр в URL WebApp
- [x] Echo handler отвечает на все текстовые сообщения
- [x] Echo handler поддерживает стикеры и медиа файлы
- [x] Unit тесты всех handlers с покрытием 80%+
- [x] Ручное тестирование через Telegram (longpoll режим готов)

**Зависимости:** D-1, D-2

---

## [I-1] Создать Docker образ и обновить docker-compose
**Роль:** Infrastructure
**Приоритет:** Высокий
**Статус:** [x] Выполнено  
**Оценка:** S

**Описание:**
Создать Dockerfile для telegram-bot-service и добавить в dev окружение

**Критерии готовности:**
- [x] Создан multi-stage Dockerfile для Go приложения
- [x] Добавлен telegram-bot-service в deploy/dev/docker-compose.yml
- [x] Настроены переменные окружения из .env.example
- [x] Настроен health check endpoint
- [x] Сервис успешно запускается через docker-compose
- [x] Проверена работа в longpoll режиме (webhook перенесен в I-2)

**Зависимости:** D-1

---

## [I-2] Протестировать webhook режим telegram-bot-service
**Роль:** Infrastructure
**Приоритет:** Высокий
**Статус:** [ ] В работе
**Оценка:** S

**Описание:**
Протестировать webhook режим работы telegram-bot-service с реальным Telegram API

**Критерии готовности:**
- [ ] Настроен webhook режим в .env файле
- [ ] Проверена установка webhook через Telegram API
- [ ] Протестирована доставка сообщений через webhook
- [ ] Проверено переключение между webhook и longpoll режимами
- [ ] Протестирован graceful shutdown в webhook режиме
- [ ] Документированы результаты тестирования

**Зависимости:** I-1, D-2, D-3

---

## [T-1] Интеграционное тестирование telegram-bot-service
**Роль:** Tester
**Приоритет:** Средний
**Статус:** [ ] В работе
**Оценка:** M

**Описание:**
Полное тестирование функциональности бота в dev окружении

**Критерии готовности:**
- [ ] Протестирована команда /start с разными параметрами
- [ ] Протестирован echo режим для всех типов сообщений
- [ ] Проверено переключение webhook/longpoll режимов
- [ ] Проверена работа health check endpoint
- [ ] Написана инструкция тестирования в README.md
- [ ] Все тесты проходят в CI pipeline

**Зависимости:** D-1, D-2, D-3, I-1

---

## Безопасность
<!-- Задачи по аутентификации, авторизации, шифрованию -->

## UI/UX
<!-- Задачи по интерфейсу и пользовательскому опыту -->

## AI/ML
<!-- Задачи по улучшению алгоритмов и моделей -->

## Интеграции
<!-- Задачи по подключению внешних сервисов -->

## Исследования
<!-- Proof of concept, эксперименты, исследования -->

---
**Формат добавления задач:**
```
## Название задачи
**Описание:** краткое описание проблемы или функции
**Приоритет:** [Высокий/Средний/Низкий]
**Оценка:** [XS/S/M/L/XL]
**Зависимости:** список зависимых задач
**Критерии готовности:** что должно быть выполнено
```